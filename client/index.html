<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spyfall</title>

    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link
      rel="alternate icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🕵️</text></svg>"
    />

    <link href="/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="spy.css" />
  </head>

  <body class="bg-secondary">
    <nav class="navbar navbar-expand navbar-dark bg-primary shadow-sm">
      <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">🕵️ Spyfall</span>
        <div class="navbar-nav me-auto mb-2 mb-lg-0">
          <a href="https://games.verybadfrags.com" target="_blank"
            >🎮 More games</a
          >
        </div>
      </div>
    </nav>

    <div class="container mb-5 pt-3">
      <div
        id="error"
        class="alert alert-danger mb-3"
        style="display: none"
      ></div>

      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 gy-4">
        <!-- Connect -->
        <div class="col" id="connect-wrapper">
          <div class="card text-dark bg-light border-primary shadow">
            <div class="card-body">
              <form id="connect-form">
                <div class="mb-3">
                  <label for="name-input" class="form-label">👤 Name</label>
                  <input
                    type="text"
                    id="name-input"
                    class="form-control"
                    required
                    autofocus
                    maxlength="16"
                  />
                </div>
                <!-- Lobby input -->
                <div class="mb-3">
                  <label for="lobby-input" class="form-label"
                    >🎲 Lobby code</label
                  >
                  <input
                    type="text"
                    id="lobby-input"
                    class="form-control"
                    pattern="[A-Za-z0-9]*"
                    title="Lobby Code"
                    maxlength="8"
                    autocomplete="off"
                  />
                </div>
                <div class="d-grid">
                  <button
                    type=" submit"
                    id="create-lobby-button"
                    class="btn btn-primary"
                  >
                    🔌 Join Lobby
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <!-- Game chat -->
        <div class="col" id="chat-wrapper" style="display: none">
          <div class="card border-primary shadow">
            <div class="card-body">
              <div class="progress mb-2" style="height: 2.5em">
                <div
                  class="progress-bar bg-info text-dark"
                  id="progress-bar"
                  role="progressbar"
                  style="width: 100%"
                  aria-valuenow="100"
                  aria-valuemin="0"
                  aria-valuemax="100"
                >
                  ⏱ 5:00
                </div>
              </div>
              <div class="row g-0">
                <div
                  id="chat-box"
                  class="chat-box card bg-light border-bottom-0 rounded-0 rounded-top pt-3"
                >
                  <ul id="events" class="list"></ul>
                </div>
                <form id="talk-form">
                  <div class="input-group">
                    <input
                      type="text"
                      id="chat-input"
                      class="form-control border-rounded-bottom-left"
                      placeholder="Message..."
                      autocomplete="off"
                      required
                      maxlength="64"
                    />
                    <button
                      type="submit"
                      id="chat-button"
                      class="btn btn-primary border-rounded-bottom-right"
                    >
                      ✉️ Send
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!-- Settings -->
        <div class="col" id="players-wrapper" style="display: none">
          <div class="card border-secondary shadow">
            <div class="card-header">⚙️ Settings</div>
            <div class="card-body">
              <!-- Lobby code -->
              <div class="row g-3 align-items-center mb-3">
                <div class="col-auto">
                  <label for="lobby-display" class="col-form-label"
                    >Lobby</label
                  >
                </div>
                <div class="col-auto">
                  <input
                    type="text"
                    class="form-control"
                    id="lobby-display"
                    readonly
                  />
                </div>
              </div>

              <!-- Players list -->
              <h6 class="card-title">👥 Players</h6>
              <ul id="peers-list" class="list"></ul>

              <hr />

              <p class="card-title">🏁 New Game</p>
              <form id="new-game-form">
                <div class="form-check form-switch mb-3">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="ready-check"
                    name="ready-check"
                    required
                    autocomplete="off"
                  />
                  <label for="ready-check" class="clickable form-check-label"
                    >Ready</label
                  >
                </div>
                <div class="d-grid">
                  <button
                    type="submit"
                    id="start-button"
                    class="btn btn-primary"
                  >
                    🚦 Start new round
                  </button>
                </div>
              </form>
              <hr />
              <div class="d-grid">
                <button
                  type="submit"
                  id="leave-lobby-button"
                  class="btn btn-sm btn-outline-danger"
                >
                  ⬅️ Leave lobby
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- List of Locations -->
        <div class="col">
          <div class="card shadow">
            <div class="card-header">📍 Locations</div>
            <ul id="locations-list" class="list-group list-group-flush"></ul>
          </div>
        </div>

        <!-- Rules -->
        <div class="col">
          <div class="card shadow">
            <div class="card-header">📖 Rules</div>
            <div class="card-body">
              <div class="d-grid">
                <button id="rules-button" class="btn btn-outline-primary">
                  👓 Show/Hide
                </button>
              </div>
              <div id="instructions" style="display: none">
                <ul>
                  <li>👥 3-10 Players</li>
                  <li>⏱ 5 Minutes Rounds</li>
                  <li>📱 1 Device per player</li>
                </ul>
                <ul>
                  <li>All players are in the same location</li>
                  <li>The spy has to guess the current location</li>
                  <li>The other players have to guess who the spy is</li>
                  <li>
                    The first player picks another person and asks them a
                    question about the location (Do people wear a uniform? Is
                    there a specific color in this place? ...)
                  </li>
                  <li>
                    The player who just answered the question asks the next
                    question to another person
                  </li>
                </ul>
                <h6 id="when-the-timer-ends">When the timer ends</h6>
                <ul>
                  <li>
                    Players vote to designate the spy
                    <ul>
                      <li>
                        If the players have voted for the spy, the spy has one
                        chance to guess the location and win the game
                      </li>
                      <li>
                        If the players have voted for an innocent, the spy wins
                      </li>
                    </ul>
                  </li>
                </ul>
                <h6 id="at-any-time">At any time</h6>
                <ul>
                  <li>
                    The players can vote for a spy if they have a majority
                  </li>
                  <li>
                    The spy can guess the location. The spy wins the game if he
                    guessed correctly, or loses otherwise
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer
      class="navbar navbar-light bg-light border-dark border-top rounded-0 pt-3 pb-4"
    >
      <div class="container">
        <div class="row gy-2">
          <div class="lead">
            No internet? Play
            <a href="https://offline-spy.verybadfrags.com" target="_blank"
              >📵🕵️ Offline Spyfall</a
            >
          </div>
          <div class="lead">
            Suggestions, Feedback?
            <a href="mailto:spy@verybadfrags.com">spy@verybadfrags.com</a>
          </div>
          <div class="lead">
            <a
              href="https://github.com/VeryBadFrags/online-spy"
              target="_blank"
              rel="noopener noreferrer"
              >💾 Source code on GitHub</a
            >
          </div>
          <div class="lead">
            Like this game?
            <a
              href="https://www.buymeacoffee.com/verybadfrags"
              target="_blank"
              rel="noopener noreferrer"
              >Support VeryBadFrags</a
            >
          </div>
        </div>
      </div>
    </footer>

    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="main.js"></script>
  </body>
</html>
